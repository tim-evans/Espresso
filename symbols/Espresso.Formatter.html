
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="generator" content="JsDoc Toolkit" />

	<title>JsDoc Reference - Espresso.Formatter</title>
	
  <link rel="stylesheet" type="text/css" href="../static/default.css"></link>
  <link rel="stylesheet" type="text/css" href="../static/doc.css"></link>
  <script type="text/javascript" src="../../bin/espresso.js"></script>
</head>

<body class="doc">
  <div id="header">
  <h1><a href="../">Espresso</a></h1>
  <span class="caption">A pick-me up for JavaScript Library authors.</span>
  <span id="status"></span>
</div>

<script type="text/javascript" src="../../frameworks/shoulda.js/shoulda.js"></script>
<script type="text/javascript" src="../../test/test.js"></script>
<script type="text/javascript" src="../../test/core.js"></script>
<script type="text/javascript" src="../../test/mix.js"></script>
<script type="text/javascript" src="../../test/class.js"></script>
<script type="text/javascript" src="../../test/template.js"></script>
<script type="text/javascript" src="../../test/formatter.js"></script>
<script type="text/javascript" src="../../test/hash.js"></script>
<script type="text/javascript" src="../../test/function.js"></script>
<script type="text/javascript" src="../../test/object.js"></script>
<script type="text/javascript" src="../../test/string.js"></script>
<script type="text/javascript">
  Tests.run();
  if (Tests.testsFailed > 0) {
    document.getElementById('status').innerHTML += "<span class='fail'></span> {testsFailed} failed".fmt(Tests);
  } else {
    document.getElementById('status').innerHTML += "<span class='pass'></span> OK";
  }
</script>

  <div id="module">
		<h1>
				
		  Class Espresso.Formatter
    </h1>
    
      <span class="src"><a href="../symbols/formatter.js.html">formatter.js</a></span>
    
  </div>
	<div id="index">
		<span class="banner">Class Index<img class="handle" src="../static/dot.gif" onmousedown="beginResize()" /></span>
<span class="class-list"><ul><li><a href="../symbols/global.html">global</a></li><li><a href="../symbols/Array.html">Array</a></li><li><a href="../symbols/Boolean.html">Boolean</a></li><li><a href="../symbols/Date.html">Date</a></li><li><a href="../symbols/Espresso.html">Espresso</a></li><ul><li><a href="../symbols/Espresso.Class.html">Class</a></li><li><a href="../symbols/Espresso.Enumerable.html">Enumerable</a></li><li><a href="../symbols/Espresso.Formatter.html">Formatter</a></li><li><a href="../symbols/Espresso.Hash.html">Hash</a></li><li><a href="../symbols/Espresso.KVO.html">KVO</a></li><li><a href="../symbols/Espresso.PubSub.html">PubSub</a></li><li><a href="../symbols/Espresso.Scheduler.html">Scheduler</a></li><li><a href="../symbols/Espresso.Template.html">Template</a></li></ul><li><a href="../symbols/Function.html">Function</a></li><li><a href="../symbols/JSON.html">JSON</a></li><li><a href="../symbols/Number.html">Number</a></li><li><a href="../symbols/Object.html">Object</a></li><li><a href="../symbols/String.html">String</a></li></ul></span>
<script type="text/javascript">
function beginResize(e) {
  document.addEventListener('mousemove', resize, true);
  document.addEventListener('mouseup', endResize, true);
}

function resize(e) {
  var index = document.getElementById('index'),
      content = document.getElementById('content'),
      x = e.pageX || e.clientX + 15;

  if (x <= 225) {
    x = 225;
  } else if (x >= 400) {
    x = 400;
  }
  index.setAttribute('style', 'width: ' + x + "px");
  content.setAttribute('style', 'left: ' + x + "px");

  e.returnValue = false;
  return false;
}

function endResize(e) {
  document.removeEventListener('mousemove', resize, true);
}
</script>

	</div>
  <div id="content">

<!-- ============================== class summary ========================== -->
    
      <h1 class="title">Overview</h1>
      
			<p class="description">
				<p>Advanced String Formatting borrowed from the eponymous Python PEP.
It provides a flexible and powerful string formatting utility
that allows the your string templates to have meaning!</p>

<p>The formatter follows the rules of Python <a href="http://www.python.org/dev/peps/pep-3101/">PEP 3101</a>
(Advanced String Formatting) strictly, but takes into account
differences between JavaScript and Python.</p>

<p>To use literal object notation, just pass in one argument for
the formatter. This is optional however, as you can always
absolutely name the arguments via the number in the argument
list. This means that:</p>

<div class="code">
<code>alert(Espresso.Formatter.fmt(<span class="string">"Hello,&nbsp;{name}!"</span>,&nbsp;{&nbsp;name:&nbsp;<span class="string">"world"</span>&nbsp;}));</code>
</div>

<p>is equivalent to:</p>

<div class="code">
<code>alert(Espresso.Formatter.fmt(<span class="string">"Hello,&nbsp;{0.name}!"</span>,&nbsp;{&nbsp;name:&nbsp;<span class="string">"world"</span>&nbsp;}));</code>
</div>

<p>For more than one argument you must provide the position of your
argument.</p>

<div class="code">
<code>alert(Espresso.Formatter.fmt(<span class="string">"{0},&nbsp;{1}!"</span>,&nbsp;<span class="string">"hello"</span>,&nbsp;<span class="string">"world"</span>));</code>
</div>

<p>If your arguments and formatter are "as is"- that is, in order,
and flat objects as you intend them to be, you can write your
template string like so:</p>

<div class="code">
<code>alert(Espresso.Formatter.fmt(<span class="string">"{},&nbsp;{}!"</span>,&nbsp;<span class="string">"hello"</span>,&nbsp;<span class="string">"world"</span>));</code>
</div>

<p>To use the literals <code>{</code> and <code>}</code>, simply double them, like the following:</p>

<div class="code">
<code>alert(Espresso.Formatter.fmt(<span class="string">"{lang}&nbsp;uses&nbsp;the&nbsp;{{variable}}&nbsp;format&nbsp;too!"</span>,&nbsp;{<br/>&nbsp;&nbsp;&nbsp;lang:&nbsp;<span class="string">"Python"</span>,&nbsp;variable:&nbsp;<span class="string">"(not&nbsp;used)"</span><br/>}));<br/><span class="single-line-comment">//</span>&nbsp;=&gt;&nbsp;"Python&nbsp;uses&nbsp;the&nbsp;{variable}&nbsp;format&nbsp;too!"</code>
</div>

<p>Check out the examples given for some ideas on how to use it.</p>

<p>For developers wishing to have their own custom handler for the
formatting specifiers, you should write your own  <code>__fmt__</code> function
that takes the specifier in as an argument and returns the formatted
object as a string. All formatters are implemented using this pattern,
with a fallback to Object's <code>__fmt__</code>, which turns said object into
a string, then calls <code>__fmt__</code> on a string.</p>

<p>Consider the following example:</p>

<div class="code">
<code>Localizer&nbsp;=&nbsp;Espresso.Template.extend({<br/>&nbsp;&nbsp;__fmt__:&nbsp;<span class="keyword">function</span>&nbsp;(spec)&nbsp;{<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">this</span>.get(spec);<br/>&nbsp;&nbsp;}<br/>});<br/><br/>_hello&nbsp;=&nbsp;Localizer.extend({<br/>&nbsp;&nbsp;en:&nbsp;<span class="string">'hello'</span>,<br/>&nbsp;&nbsp;fr:&nbsp;<span class="string">'bonjour'</span>,<br/>&nbsp;&nbsp;jp:&nbsp;<span class="string">'konnichiwa'</span><br/>});<br/><br/>alert(Espresso.Formatter.fmt(<span class="string">"{:en}"</span>,&nbsp;_hello));<br/><span class="single-line-comment">//</span>&nbsp;=&gt;&nbsp;"hello"<br/><br/>alert(Espresso.Formatter.fmt(<span class="string">"{:fr}"</span>,&nbsp;_hello));<br/><span class="single-line-comment">//</span>&nbsp;=&gt;&nbsp;"bonjour"<br/><br/>alert(Espresso.Formatter.fmt(<span class="string">"{:jp}"</span>,&nbsp;_hello));<br/><span class="single-line-comment">//</span>&nbsp;=&gt;&nbsp;"konnichiwa"</code>
</div>
			</p>
      
      
			
      
			
			
			
    


<!-- ============================== constructor summary ====================
			
			<table class="summaryTable" cellspacing="0" summary="A summary of the constructor documented in the class Espresso.Formatter.">
				<caption>Class Summary</caption>
				<thead>
					<tr>
						<th scope="col">Constructor Attributes</th>
						<th scope="col">Constructor Name and Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="attributes">&nbsp;</td>
						<td class="nameDescription" >
							<div class="fixedFont">
								<b><a href="../symbols/Espresso.Formatter.html">Espresso.Formatter</a></b>()
							</div>
							<div class="description"></div>
						</td>
					</tr>
				</tbody>
			</table>
			-->

<!-- ============================== properties summary ===================== -->
			
				
        
          <h1 class="title">Field Summary</h1>
        
				
          <table>
					
						<tr class="nameDescription">
              <td class="fixedFont right">+</td>
              <td class="fixedFont">
                <a href="../symbols/Espresso.Formatter.html#.SPECIFIER">SPECIFIER</a>
              </td>
            </tr>
					
          </table>
				
				
				
			

<!-- ============================== methods summary ======================== -->
			
				
				
        <h1 class="title">Method Summary</h1>
        
				
          <table>
					
						<tr class="nameDescription">
              <td><span class="fixedFont">
              + <b><a href="../symbols/Espresso.Formatter.html#.fmt">fmt</a></b>(template)</td>
            </tr>
					
						<tr class="nameDescription">
              <td><span class="fixedFont">
              + <b><a href="../symbols/Espresso.Formatter.html#.formatField">formatField</a></b>(value, args)</td>
            </tr>
					
						<tr class="nameDescription">
              <td><span class="fixedFont">
              + <b><a href="../symbols/Espresso.Formatter.html#.parseField">parseField</a></b>(template, args)</td>
            </tr>
					
          </table>
				
				
				
			
<!-- ============================== events summary ======================== -->
			

<!-- ============================== field details ========================== -->		
			
				<h1 class="title">Field Detail</h1>
				
          <div>
             <a name=".SPECIFIER"> </a>
             <h3><span class="light">(RegExp)</span> Espresso.Formatter.<b>SPECIFIER</b></h3>
					</div>
					<div class="description">
						<p>The specifier regular expression.</p>

<p>The groups are:</p>

<p><code>[[fill]align][sign][#][0][minimumwidth][.precision][type]</code></p>

<p>The brackets (<code>[]</code>) indicates an optional element.</p>

<p>The <code>fill</code> is the character to fill the rest of the minimum width
of the string.</p>

<p>The <code>align</code> is one of:</p>

<ul>
<li><code>^</code> Forces the field to be centered within the available space.</li>
<li><code>&lt;</code> Forces the field to be left-aligned within the available
    space. This is the default.</li>
<li><code>&gt;</code> Forces the field to be right-aligned within the available space.</li>
<li><code>=</code> Forces the padding to be placed after the sign (if any)
    but before the digits. This alignment option is only valid
    for numeric types.</li>
</ul>

<p>Unless the minimum field width is defined, the field width
will always be the same size as the data to fill it, so that
the alignment option has no meaning in this case.</p>

<p>The <code>sign</code> is only valid for numeric types, and can be one of
the following:</p>

<ul>
<li><code>+</code> Indicates that a sign shoulb be used for both positive
    as well as negative numbers.</li>
<li><code>-</code> Indicates that a sign shoulb be used only for as negative
    numbers. This is the default.</li>
<li><code>&nbsp;</code> Indicates that a leading space should be used on positive
    numbers.</li>
</ul>

<p>If the <code>#</code> character is present, integers use the 'alternate form'
for formatting. This means that binary, octal, and hexadecimal
output will be prefixed with '0b', '0o', and '0x', respectively.</p>

<p><code>width</code> is a decimal integer defining the minimum field width. If
not specified, then the field width will be determined by the
content.</p>

<p>If the width field is preceded by a zero (<code>0</code>) character, this enables
zero-padding. This is equivalent to an alignment type of <code>=</code> and a
fill character of <code>0</code>.</p>

<p>The 'precision' is a decimal number indicating how many digits
should be displayed after the decimal point in a floating point
conversion. For non-numeric types the field indicates the maximum
field size- in other words, how many characters will be used from
the field content. The precision is ignored for integer conversions.</p>

<p>Finally, the 'type' determines how the data should be presented.</p>

<p>The available integer presentation types are:</p>

<ul>
<li><code>b</code> Binary. Outputs the number in base 2.</li>
<li><code>c</code> Character. Converts the integer to the corresponding
    Unicode character before printing.</li>
<li><code>d</code> Decimal Integer. Outputs the number in base 10.</li>
<li><code>o</code> Octal format. Outputs the number in base 8.</li>
<li><code>x</code> Hex format. Outputs the number in base 16, using lower-
    case letters for the digits above 9.</li>
<li><code>X</code> Hex format. Outputs the number in base 16, using upper-
    case letters for the digits above 9.</li>
<li><code>n</code> Number. This is the same as <code>d</code>, except that it uses the
    current locale setting to insert the appropriate
    number separator characters.</li>
<li><code>&nbsp;</code> (None) the same as <code>d</code></li>
</ul>

<p>The available floating point presentation types are:</p>

<ul>
<li><code>e</code> Exponent notation. Prints the number in scientific
    notation using the letter <code>e</code> to indicate the exponent.</li>
<li><code>E</code> Exponent notation. Same as <code>e</code> except it converts the
    number to uppercase.</li>
<li><code>f</code> Fixed point. Displays the number as a fixed-point
    number.</li>
<li><code>F</code> Fixed point. Same as <code>f</code> except it converts the number
    to uppercase.</li>
<li><code>g</code> General format. This prints the number as a fixed-point
    number, unless the number is too large, in which case
    it switches to <code>e</code> exponent notation.</li>
<li><code>G</code> General format. Same as <code>g</code> except switches to <code>E</code>
    if the number gets to large.</li>
<li><code>n</code> Number. This is the same as <code>g</code>, except that it uses the
    current locale setting to insert the appropriate
    number separator characters.</li>
<li><code>%</code> Percentage. Multiplies the number by 100 and displays
    in fixed (<code>f</code>) format, followed by a percent sign.</li>
<li><code>&nbsp;</code> (None) similar to <code>g</code>, except that it prints at least one
    digit after the decimal point.</li>
</ul>
					</div>
					
					

						
						
						
						

						
						


					
				
			

<!-- ============================== method details ========================= -->		
			
				<h1 class="title">Method Detail</h1>
				
					<a name=".fmt"> </a>
          <div>
             <a name=".fmt"> </a>
             <h3><span class="light">(<a href="../symbols/String.html">String</a>)</span> Espresso.Formatter.<b>fmt</b>(template)</h3>

             <div class="description">
               
  				       <dt><p>Format a template string with provided arguments.</p></dd>
               
						   
             </div>

						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">(<a href="../symbols/String.html">String</a>)</span> <b>template</b>
									
								</dt>
								<dd>The template string to format the arguments with.</dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dt><span class="light fixedFont">(<a href="../symbols/String.html">String</a>)</span> The template formatted with the given leftover arguments.</dt>
							
							</dl>
						
						

						
					

					</div>
					
				 
					
					<hr />
				
					<a name=".formatField"> </a>
          <div>
             <a name=".formatField"> </a>
             <h3><span class="light">(<a href="../symbols/String.html">String</a>)</span> Espresso.Formatter.<b>formatField</b>(value, args)</h3>

             <div class="description">
               
  				       <dt><p>Returns the value of the template string formatted with the
given arguments.</p></dd>
               
						   
             </div>

						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">(<a href="../symbols/String.html">String</a>)</span> <b>value</b>
									
								</dt>
								<dd>The template string and format specifier.</dd>
							
								<dt>
									<span class="light fixedFont">(<a href="../symbols/Array.html">Array</a>)</span> <b>args</b>
									
								</dt>
								<dd>An Array of arguments to use to format the template string.</dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dt><span class="light fixedFont">(<a href="../symbols/String.html">String</a>)</span> The formatted template.</dt>
							
							</dl>
						
						

						
					

					</div>
					
				 
					
					<hr />
				
					<a name=".parseField"> </a>
          <div>
             <a name=".parseField"> </a>
             <h3><span class="light">(<a href="../symbols/String.html">String</a>)</span> Espresso.Formatter.<b>parseField</b>(template, args)</h3>

             <div class="description">
               
  				       <dt><p>Parses the template with the arguments provided,
parsing any nested templates.</p></dd>
               
						   
             </div>

						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">(<a href="../symbols/String.html">String</a>)</span> <b>template</b>
									
								</dt>
								<dd>The template string to format.</dd>
							
								<dt>
									<span class="light fixedFont">(<a href="../symbols/Array.html">Array</a>)</span> <b>args</b>
									
								</dt>
								<dd>The arguments to parse the template string.</dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dt><span class="light fixedFont">(<a href="../symbols/String.html">String</a>)</span> The formatted template.</dt>
							
							</dl>
						
						

						
					

					</div>
					
				 
					
					
				
			
			
<!-- ============================== event details ========================= -->		
			
			
			<hr />
		</div>

		
<!-- ============================== footer ================================= -->
		<div class="fineprint" style="clear:both">
			
			Documentation generated by <a href="http://www.jsdoctoolkit.org/" target="_blank">JsDoc Toolkit</a> 2.1.0 on Tue Jan 18 2011 09:47:24 GMT-0500 (EST)
		</div>
	</body>
</html>
